<ion-content>
  <ion-card *ngIf="change">
    <ion-card-header>
      <ion-card-title>Cambiar contraseña</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <form [formGroup]="form" class="example-form">
        <ion-list>
          <ion-item>
            <ion-label>Contraseña actual</ion-label>
            <ion-input
              type="text"
              formControlName="password"
              placeholder="Introduce tu contraseña actual"
            ></ion-input>
          </ion-item>
          <ion-item>
            <ion-label>Nueva contraseña</ion-label>
            <ion-input
              placeholder="Introduce una contraseña nueva"
              formControlName="newPassword"
              type="text"
            ></ion-input>
          </ion-item>
        </ion-list>
      </form>
      <ion-button [disabled]="!form.valid" (click)="changePasswordOk()">Cambiar contraseña</ion-button>
      <ion-button color="danger" (click)="cancelChange()">Cancelar</ion-button>
    </ion-card-content>
  </ion-card>
  
  <ion-grid>
    <ion-row>
      <ion-col size="12" style="text-align: left; padding: 1rem;">
        <ion-button (click)="openModal()" style="margin-right: 1rem;">Agregar miembro al grupo</ion-button>
        <ion-button *ngIf="!change" (click)="change = !change">Cambiar contraseña</ion-button>
        <!-- <ion-button style="margin-right: 1rem;" (click)="addFile()">Agregar Carga Familiar</ion-button>
        <ion-button (click)="downloadModel()">Descargar modelo</ion-button> -->
      </ion-col>

      <ion-col size="12" *ngIf="persons.length === 0 && !isLoading">
        <ion-text style="display: block; font-size: 1.3rem; font-weight: 600; color: #ccc; text-align: center; padding: 2rem;">No posee ningun miembro de familia registrado</ion-text>
      </ion-col>

      <ion-col
        size="6"
        size-md="4"
        size-lg="4"
        *ngFor="let person of persons"
      >
        <ion-card class="carta">
          <ion-card-header>
            <ion-card-title class="title">{{ person.name }} {{ person.patherLastName }} {{ person.motherLastName }}</ion-card-title>
            <ion-card-subtitle>Fecha Nacimiento: {{ person.dateOfBirth }}</ion-card-subtitle>
            <ion-card-subtitle>Cédula: {{ person.ci }}</ion-card-subtitle>
            <ion-card-subtitle>Género: {{ person.gender }}</ion-card-subtitle>
            <div>
              <div [ngClass]="{ op: !platform.is('mobileweb') }">
                <mat-icon class="edit" (click)="edit(person)">edit</mat-icon>
                <mat-icon class="delete" (click)="deleteMember(person)">delete</mat-icon>
              </div>
            </div>
          </ion-card-header>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
